<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <meta charset="UTF-8">
    <title>Calculator Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
</head>
<body>
    <div ng-app="myApp" ng-controller="myCtrl">
        <button ng-click="myFunction()">CLick</button>
        <div id="main1" ng-click = "colorChange()" style="width: 80px; height: 80px; background-color: blue;"></div>
        <div id="main2" ng-click = "colorChange()" style="width: 80px; height: 80px; background-color: blue;"></div>
        <div id="main3" ng-click = "colorChange()" style="width: 80px; height: 80px; background-color: blue;"></div>
        <p>{{count}}</p>

        <div class="container">
            <h2>Basic Table</h2>
            <p>The .table class adds basic styling (light padding and horizontal dividers) to a table:</p>
            <h3 id="mainH3" ng-bind="name24"></h3>
            <table class="table">
                <thead>
                <tr>
                    <th><div id="main4" ng-click = "colorChange('#main4',1)" style="width: 80px; height: 80px; background-color: blue;"></div></th>
                    <th><div id="main5" ng-click = "colorChange('#main5',2)" style="width: 80px; height: 80px; background-color: blue;"></div></th>
                    <th><div id="main6" ng-click = "colorChange('#main6',3)" style="width: 80px; height: 80px; background-color: blue;"></div></th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><div id="main7" ng-click = "colorChange('#main7',4)" style="width: 80px; height: 80px; background-color: blue;"></div></td>
                    <td><div id="main8" ng-click = "colorChange('#main8',5)" style="width: 80px; height: 80px; background-color: blue;"></div></td>
                    <td><div id="main9" ng-click = "colorChange('#main9',6)" style="width: 80px; height: 80px; background-color: blue;"></div></td>
                </tr>
                <tr>
                    <td><div id="main10" ng-click = "colorChange('#main10',7)" style="width: 80px; height: 80px; background-color: blue;  "></div></td>
                    <td><div id="main11" ng-click = "colorChange('#main11',8)" style="width: 80px; height: 80px; background-color: blue;"></div></td>
                    <td><div id="main12" ng-click = "colorChange('#main12',9)" style="width: 80px; height: 80px; background-color: blue;"></div></td>
                </tr>
                </tbody>
            </table>
            <h2 id="mainH2" ng-bind="name23"></h2>
        </div>







    </div>
    <script>

        var gameArr = [1,2,3,4,5,6,7,8,9];
        var player1Arr = [];
        var player2Arr = [];
        var app = angular.module('myApp',[]);
        var myEl = angular.element(document.querySelector('#main1'));
        var totalCount = 0;
        var tally = 0;
        app.controller('myCtrl',function($scope){
            $scope.count = 0;
            $scope.myFunction = function(){
                    if(totalCount==4)
                    {
                        myEl.css('background-color','red');
                    }
                    $scope.count++;
                    totalCount++;
            }

            $scope.colorChange = function(name,pos){
                var q = angular.element(document.querySelector('#mainH2'));
                var a = false;
                var b = false;
                var c = false;
                var isTaken = false;
                var myEl2 = angular.element(document.querySelector(name));
                // if(tally==0)
                // {


                    if(tally==0)
                    {

                        // for(i =0; i<player1Arr.length; i++)
                        // {
                        //     console.log(player1Arr[i]);
                        // }

                        for(i =0; i<player2Arr.length; i++)
                        {
                            if(pos==player2Arr[i])
                            {
                                isTaken = true;
                                $scope.name23 = "Player 2 has taken this spot. Choose another one";
                                break;
                            }
                        }
                        for(i =0; i<player1Arr.length; i++)
                        {
                            if(pos==player1Arr[i])
                            {
                                isTaken = true;
                                $scope.name23 = "You has taken this spot. Choose another one";
                                break;
                            }
                        }
                        if(isTaken==false)
                        {
                            myEl2.css('background-image','url("circle-outline.png")');
                            tally++;
                            $scope.name23 = "";
                            player1Arr.push(pos);
                            $scope.name24="Player 2 Turn";
                        }

                    }
                    else
                    {

                        for(i =0; i<player1Arr.length; i++)
                        {
                            if(pos==player1Arr[i])
                            {
                                isTaken = true;
                                $scope.name23 = "Player 1 has taken this spot. Choose another one";
                                break;
                            }
                        }
                        for(i =0; i<player2Arr.length; i++)
                        {
                            if(pos==player2Arr[i])
                            {
                                isTaken = true;
                                $scope.name23 = "You has taken this spot. Choose another one";
                                break;
                            }
                        }
                        if(isTaken==false)
                        {

                            $scope.name23 = "";
                            myEl2.css('background-image','url("x-outline.png")');
                            tally--;
                            player2Arr.push(pos);
                            $scope.name24="Player 1 Turn";
                        }




                    }

                if(isTaken==false)
                {
                    myEl2.css('background-color','red');
                    myEl2.css('background-size','60px 60px');
                    myEl2.css('background-repeat','no-repeat');
                    myEl2.css('background-position','center');
                }

                console.log("Player 2 information: ");
                for(i =0; i<player2Arr.length; i++)
                {
                    console.log(player2Arr[i]);
                }
                console.log("Player 1 information: ");
                for(i =0; i<player1Arr.length; i++)
                {
                    console.log(player1Arr[i]);
                }

                if((player2Arr.length + player1Arr.length) == 9)
                {
                    $scope.name23 = "Game Over: No one wins!";
                }

                player1Arr.sort();
                player2Arr.sort();
                for(i =0; i<player1Arr.length; i++)
                {
                    var testVal = player1Arr[i];
                    // console.log(player1Arr[i]);
                    if((player1Arr[i]%3)==0)
                    {
                        if(i>=2)
                        {
                            if(player1Arr[i-1]==(testVal-1))
                            {
                                if(player1Arr[i-2]==(testVal-2))
                                {
                                    $scope.name23 = "Game Over: Player 1 wins!";
                                    break;
                                }
                            }
                        }

                    }
                    else
                    {
                        if(i>=2)
                        {
                            if(player1Arr[i-1]==(testVal-3))
                            {
                                if(player1Arr[i-2]==(testVal-6))
                                {
                                    $scope.name23 = "Game Over: Player 1 wins!";

                                    break;
                                }
                                console.log("TOUCHDOWN ALABAMA " + testVal);
                            }

                        }

                    }
                }

                    //tally++;
                // }
                // else
                // {
                //     myEl2.css('background-color','blue');
                //     tally--;
                // }
                //
                // $scope.count++;
                // totalCount++;
            }

            $scope.colorChange2 = function(){
                if(tally==0)
                {
                    myEl.css('background-color','red');
                    tally++;
                }
                else
                {
                    myEl.css('background-color','blue');
                    tally--;
                }

                $scope.count++;
                totalCount++;
            }



        });
    </script>
</body>
</html>